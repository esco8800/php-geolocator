Базовые действия управления
===========================

Часто при разработке административной части, реже при пользовательской, появляются
базовые однотипные действия, которые дублируются из контроллера в контроллер с единственным
отличием в выборе класса модели.

Все действия заточены под работу с базовыми элементами конмопнентов и по умолчанию работают
с абстрактными сервисами, в связи с чем требуется до создания действия, корректно сконфигурировать
DI фреймворка на предоставление конкретных реализаций базовых компонентов.

Реализован полный набор CRUD действий для web и rest частей приложения, а так же существует
отдельный ряд post действий, которые будут работать только с post запросами и перенаправлять на них
запрос из веб интерфейса можно путем создания кнопки:

```php
<?= Html::a('Выполнить', ['/controller/action'], ['data-method' => 'post']); ?>
```

Результат такого запроса будет возвращение на страницу от куда пришел запрос, если
подобные данные имеются на сервере (некоторые сервера блокируют получения адреса запроса),
либо же по "дефотному роуту" который можно указать в настройке к любому действию:

```php
    'defaultBackUrl' => ['/controller/back'],
```

Если запрос был произведен с использованием ajax, то в ответ придет массив или исключений:

```json
{
    "success": true,
    "message": "Уведомление"
}
```

**Исключения**

Действия предполагают два варианта исключений, остальные по мере возмножностей должны
быть отловлены и залогированы.

- 400 Bad Request
- 404 Not Found

Удаление
--------

Наиболее часто встречаемое действие, которое имеется практически в каждом контроллере.
Реализуя post метод обращения занимается не только удалением, но и отловом исключений.
В результате после обращения к данному действию всегда можно получить предсказуемый
результат его выполнения. Это либо редирект, либо Bad Request, либо массив дефолтного ответа.

**Настройка DeleteAction**

Базовая настройка подключения:

```php
puplic function actions()
{
    return [
        'delete' => 'chulakov\components\web\actions\DeleteAction',
    ];
}
```

Смена активности
----------------

Некоторые модели могут содержать возможность их включения и выключения одним из двух
способов влияния на модель:

- Переключение boolean поля (`ToggleActivityAction`)
- Переключение смены статуса (`ToggleStatusAction`)

**Настройка ToggleActivityAction**

При обращении к методу происходит смена поля на противоположное, таким образом поддерживается
только два статуса, как у boolean поля: 1 и 0.

Базовая настройка подключения:

```php
puplic function actions()
{
    return [
        'delete' => [
            'class' => 'chulakov\components\web\actions\ToggleActivityAction',
            'attribute' => 'is_active', // Значение по умолчанию
        ],
    ];
}
```

**Настройка ToggleStatusAction**

Более сложный в настройке, но стольже простой способ смены статуса элемента.
Отличается от активности тем, что производится смена статуса на один из указанных при настройке.
Таким образом можно указывать необходимое состояние элемента.

Базовая настройка подключения:

```php
puplic function actions()
{
    return [
        'delete' => [
            'class' => 'chulakov\components\web\actions\ToggleStatusAction',
            'attribute' => 'status', // Значение по умолчанию
            'statusOff' => 0, // Значение по умолчанию
            'statusOn' => 1, // Значение по умолчанию
        ],
    ];
}
```
